<script>
	import { roomData } from '$lib/state.svelte';

	// props
	let { scaler, handleRoomClick } = $props();

	let color401 = $state('#E1F9D6');
	let color450 = $state('#E1F9D6');

	$effect(() => {
		if (!roomData.rooms) return;
		color401 = roomData.rooms[401].isOccupied ? '#F0CBCB' : '#E1F9D6';
		color450 = roomData.rooms[450].isOccupied ? '#F0CBCB' : '#E1F9D6';
	});
</script>

<div class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2">
	<svg
		width={804 * scaler}
		height={546 * scaler}
		viewBox="0 0 804 546"
		fill="none"
		xmlns="http://www.w3.org/2000/svg"
	>
		<rect x="5.5" y="71" width="793" height="470" fill="white" />
		<rect x="648" y="347" width="152" height="194" fill={color401} class="cursor-pointer outline-none" onkeydown={(e) => e.key === 'Enter' && handleRoomClick(401)}  tabindex="0" role="button" onclick={() => handleRoomClick(401)} />
		<rect x="97" y="71" width="451" height="194" fill="#E0E0E0" />
		<rect x="733.5" y="257" width="61" height="98" fill="white" />
		<rect x="6" y="347" width="642" height="194" fill="#E0E0E0" />
		<rect x="548" y="347" width="100" height="71" fill="#E0E0E0" />
		<rect x="566" y="5" width="233" height="66" fill={color450} class="cursor-pointer outline-none" onkeydown={(e) => e.key === 'Enter' && handleRoomClick(450)} tabindex="0" role="button" onclick={() => handleRoomClick(450)} />
		<rect x="548" y="71" width="163" height="52" fill="#E0E0E0" />
		<rect x="548" y="123" width="88" height="139" fill="#E0E0E0" />
		<path
			d="M30 70.5H4.5V262M25 541H4.5V351M190 541H199H179M483 541H493.5H513.5M646.5 541H690H633H610.5M771.5 541H798.5V358.5M798.5 70.5V258M798.5 70.5H788.5H778.5M798.5 70.5V4.5H565.25V70.5M732.5 70.5H721.75H711M424 70.5H382M259.5 70.5H237H226.5M185.5 70.5H167.75H165.75M150 70.5H165H165.75M104.5 70.5H94.5M70 70.5H94.5M4.5 262H47.5M4.5 262V351M94.5 70.5V262M94.5 262H84.5M94.5 262H165.75M237 262H165.75M565.25 70.5H548V123.5M565.25 70.5H634H700.5H711M711 70.5V175V123.5M711 220.5V123.5M798.5 258H711V249V262H731V277.5M798.5 258V358.5M731 304.5V309M731 335.5V351M798.5 358.5H731V351M731 351H690H676.5M4.5 351H63.25M122 351H63.25M145.5 351H169M549.5 351H633H646.5V416.5M549.5 351V416.5H646.5M549.5 351H540.5M493.5 351H413.5H337H226.5M345 541H337H329M169 351H190M169 351V416.5H63.25V351M711 123.5H634M634 123.5V262H548V123.5M634 123.5H548M165.75 262V70.5M646.5 496.5V416.5"
			stroke="black"
			stroke-width="9"
		/>
		<path d="M4.5 541H799.5" stroke="black" stroke-width="3" />
		<path d="M4.5 71H799.5" stroke="black" stroke-width="3" />
		<path d="M4.5 117H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 123H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 129H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 135H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 141H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 147H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 153H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 159H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 165H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 171H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 177H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 183H92.5" stroke="black" stroke-width="3" />
		<path d="M4.5 189H92.5" stroke="black" stroke-width="3" />
		<path d="M43.5 117V189.5" stroke="black" stroke-width="3" />
		<path d="M56.5 117.5V188" stroke="black" stroke-width="3" />
		<path d="M710.5 117H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 123H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 129H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 135H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 141H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 147H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 153H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 159H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 165H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 171H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 177H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 183H798.5" stroke="black" stroke-width="3" />
		<path d="M710.5 189H798.5" stroke="black" stroke-width="3" />
		<path d="M749.5 117V189.5" stroke="black" stroke-width="3" />
		<path d="M762.5 117.5V188" stroke="black" stroke-width="3" />
		<path
			d="M733 276V304M733 340V311M733 304H788M733 304L788 261.5V304M733 304V311M788 304L733 261.5M733 311H788M733 311L788 354.5V311M788 311L733 354.5"
			stroke="black"
			stroke-width="3"
		/>
		<path
			d="M699.546 454.848V452.64L710.778 437.088H714.266V452.32H717.466V454.848H714.266V460H711.386V454.848H699.546ZM711.514 440.128L702.906 452.32H711.514V440.128ZM720.375 448.192C720.375 444.523 720.972 441.664 722.167 439.616C723.361 437.547 725.452 436.512 728.439 436.512C731.404 436.512 733.484 437.547 734.679 439.616C735.873 441.664 736.471 444.523 736.471 448.192C736.471 451.925 735.873 454.827 734.679 456.896C733.484 458.965 731.404 460 728.439 460C725.452 460 723.361 458.965 722.167 456.896C720.972 454.827 720.375 451.925 720.375 448.192ZM733.591 448.192C733.591 446.336 733.463 444.768 733.207 443.488C732.972 442.187 732.471 441.141 731.703 440.352C730.956 439.563 729.868 439.168 728.439 439.168C726.988 439.168 725.879 439.563 725.111 440.352C724.364 441.141 723.863 442.187 723.607 443.488C723.372 444.768 723.255 446.336 723.255 448.192C723.255 450.112 723.372 451.723 723.607 453.024C723.863 454.325 724.364 455.371 725.111 456.16C725.879 456.949 726.988 457.344 728.439 457.344C729.868 457.344 730.956 456.949 731.703 456.16C732.471 455.371 732.972 454.325 733.207 453.024C733.463 451.723 733.591 450.112 733.591 448.192ZM739.7 439.52V436.864H745.716V460H742.772V439.52H739.7Z"
			fill="black"
			class="pointer-events-none"
		/>
		<path
			d="M661.343 43.136V41.48L669.767 29.816H672.383V41.24H674.783V43.136H672.383V47H670.223V43.136H661.343ZM670.319 32.096L663.863 41.24H670.319V32.096ZM688.029 31.544H679.605V37.016C679.973 36.504 680.517 36.088 681.237 35.768C681.957 35.432 682.733 35.264 683.565 35.264C684.893 35.264 685.973 35.544 686.805 36.104C687.637 36.648 688.229 37.36 688.581 38.24C688.949 39.104 689.133 40.024 689.133 41C689.133 42.152 688.917 43.184 688.485 44.096C688.053 45.008 687.389 45.728 686.493 46.256C685.613 46.784 684.517 47.048 683.205 47.048C681.525 47.048 680.165 46.616 679.125 45.752C678.085 44.888 677.453 43.736 677.229 42.296H679.365C679.573 43.208 680.013 43.92 680.685 44.432C681.357 44.944 682.205 45.2 683.229 45.2C684.493 45.2 685.445 44.824 686.085 44.072C686.725 43.304 687.045 42.296 687.045 41.048C687.045 39.8 686.725 38.84 686.085 38.168C685.445 37.48 684.501 37.136 683.253 37.136C682.405 37.136 681.661 37.344 681.021 37.76C680.397 38.16 679.941 38.712 679.653 39.416H677.589V29.624H688.029V31.544ZM692.035 38.144C692.035 35.392 692.483 33.248 693.379 31.712C694.275 30.16 695.843 29.384 698.083 29.384C700.307 29.384 701.867 30.16 702.763 31.712C703.659 33.248 704.107 35.392 704.107 38.144C704.107 40.944 703.659 43.12 702.763 44.672C701.867 46.224 700.307 47 698.083 47C695.843 47 694.275 46.224 693.379 44.672C692.483 43.12 692.035 40.944 692.035 38.144ZM701.947 38.144C701.947 36.752 701.851 35.576 701.659 34.616C701.483 33.64 701.107 32.856 700.531 32.264C699.971 31.672 699.155 31.376 698.083 31.376C696.995 31.376 696.163 31.672 695.587 32.264C695.027 32.856 694.651 33.64 694.459 34.616C694.283 35.576 694.195 36.752 694.195 38.144C694.195 39.584 694.283 40.792 694.459 41.768C694.651 42.744 695.027 43.528 695.587 44.12C696.163 44.712 696.995 45.008 698.083 45.008C699.155 45.008 699.971 44.712 700.531 44.12C701.107 43.528 701.483 42.744 701.659 41.768C701.851 40.792 701.947 39.584 701.947 38.144Z"
			fill="black"
			class="pointer-events-none"
		/>
		<path
			d="M313.466 171.224H319.322V173H311.282V156.272H313.466V171.224ZM322.769 157.712C322.353 157.712 322.001 157.568 321.713 157.28C321.425 156.992 321.281 156.64 321.281 156.224C321.281 155.808 321.425 155.456 321.713 155.168C322.001 154.88 322.353 154.736 322.769 154.736C323.169 154.736 323.505 154.88 323.777 155.168C324.065 155.456 324.209 155.808 324.209 156.224C324.209 156.64 324.065 156.992 323.777 157.28C323.505 157.568 323.169 157.712 322.769 157.712ZM323.825 159.848V173H321.641V159.848H323.825ZM329.731 162.296C330.179 161.512 330.835 160.872 331.699 160.376C332.563 159.88 333.547 159.632 334.651 159.632C335.835 159.632 336.899 159.912 337.843 160.472C338.787 161.032 339.531 161.824 340.075 162.848C340.619 163.856 340.891 165.032 340.891 166.376C340.891 167.704 340.619 168.888 340.075 169.928C339.531 170.968 338.779 171.776 337.819 172.352C336.875 172.928 335.819 173.216 334.651 173.216C333.515 173.216 332.515 172.968 331.651 172.472C330.803 171.976 330.163 171.344 329.731 170.576V173H327.547V155.24H329.731V162.296ZM338.659 166.376C338.659 165.384 338.459 164.52 338.059 163.784C337.659 163.048 337.115 162.488 336.427 162.104C335.755 161.72 335.011 161.528 334.195 161.528C333.395 161.528 332.651 161.728 331.963 162.128C331.291 162.512 330.747 163.08 330.331 163.832C329.931 164.568 329.731 165.424 329.731 166.4C329.731 167.392 329.931 168.264 330.331 169.016C330.747 169.752 331.291 170.32 331.963 170.72C332.651 171.104 333.395 171.296 334.195 171.296C335.011 171.296 335.755 171.104 336.427 170.72C337.115 170.32 337.659 169.752 338.059 169.016C338.459 168.264 338.659 167.384 338.659 166.376ZM345.95 161.984C346.334 161.232 346.878 160.648 347.582 160.232C348.302 159.816 349.174 159.608 350.198 159.608V161.864H349.622C347.174 161.864 345.95 163.192 345.95 165.848V173H343.766V159.848H345.95V161.984ZM351.903 166.376C351.903 165.032 352.175 163.856 352.719 162.848C353.263 161.824 354.007 161.032 354.951 160.472C355.911 159.912 356.975 159.632 358.143 159.632C359.295 159.632 360.295 159.88 361.143 160.376C361.991 160.872 362.623 161.496 363.039 162.248V159.848H365.247V173H363.039V170.552C362.607 171.32 361.959 171.96 361.095 172.472C360.247 172.968 359.255 173.216 358.119 173.216C356.951 173.216 355.895 172.928 354.951 172.352C354.007 171.776 353.263 170.968 352.719 169.928C352.175 168.888 351.903 167.704 351.903 166.376ZM363.039 166.4C363.039 165.408 362.839 164.544 362.439 163.808C362.039 163.072 361.495 162.512 360.807 162.128C360.135 161.728 359.391 161.528 358.575 161.528C357.759 161.528 357.015 161.72 356.343 162.104C355.671 162.488 355.135 163.048 354.735 163.784C354.335 164.52 354.135 165.384 354.135 166.376C354.135 167.384 354.335 168.264 354.735 169.016C355.135 169.752 355.671 170.32 356.343 170.72C357.015 171.104 357.759 171.296 358.575 171.296C359.391 171.296 360.135 171.104 360.807 170.72C361.495 170.32 362.039 169.752 362.439 169.016C362.839 168.264 363.039 167.392 363.039 166.4ZM371.122 161.984C371.506 161.232 372.05 160.648 372.754 160.232C373.474 159.816 374.346 159.608 375.37 159.608V161.864H374.794C372.346 161.864 371.122 163.192 371.122 165.848V173H368.938V159.848H371.122V161.984ZM389.219 159.848L381.299 179.192H379.043L381.635 172.856L376.331 159.848H378.755L382.883 170.504L386.963 159.848H389.219Z"
			fill="black"
			class="pointer-events-none"
		/>
	</svg>
</div>
